{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '42030111-51447223cbabab8b20d1b63f9';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  list: document.querySelector('.gallery-list'),\n  loader: document.querySelector('.loader'),\n};\n\nrefs.form.addEventListener('submit', handleSearch);\nrefs.loader.style.display = 'none';\n\nconst simplelightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction handleSearch(evt) {\n  evt.preventDefault();\n\n  const form = evt.currentTarget;\n  const searchWord = form.elements.search.value;\n\n  refs.loader.style.display = 'block';\n  refs.list.innerHTML = '';\n\n  if (!searchWord) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter something in the search',\n    });\n    refs.loader.style.display = 'none';\n    return;\n  }\n  searchPhotoByName(searchWord)\n    .then(data => {\n      const arr = data.hits;\n      if (!arr.length) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return;\n      }\n\n      refs.list.innerHTML = createMarkup(arr);\n      simplelightbox.refresh();\n    })\n    .catch(err => {\n      iziToast.error({\n        title: 'Error',\n        message: `${err}`,\n      });\n    })\n    .finally(() => {\n      form.reset();\n      refs.loader.style.display = 'none';\n    });\n}\n\nfunction searchPhotoByName(searchWord) {\n  const urlParams = new URLSearchParams({\n    key: API_KEY,\n    q: searchWord,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  return fetch(`${BASE_URL}?${urlParams}`).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-img\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n\n            />\n          </a>\n          <div class=\"wrapper\">\n            <div class=\"wrap\">\n              <h2 class=\"header\">Likes</h2>\n              <p class=\"numbers\">${likes}</p>\n            </div>\n            <div class=\"wrap\">\n              <h2 class=\"header\">Views</h2>\n              <p class=\"numbers\">${views}</p>\n            </div>\n            <div class=\"wrap\">\n              <h2 class=\"header\">Comments</h2>\n              <p class=\"numbers\">${comments}</p>\n            </div>\n            <div class=\"wrap\">\n              <h2 class=\"header\">Downloads</h2>\n              <p class=\"numbers\">${downloads}</p>\n            </div>\n          </div>\n        </li>`\n    )\n    .join('');\n}\n"],"names":["BASE_URL","API_KEY","refs","handleSearch","simplelightbox","SimpleLightbox","evt","form","searchWord","iziToast","searchPhotoByName","data","arr","createMarkup","err","urlParams","resp","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"wvBAMA,MAAMA,EAAW,2BACXC,EAAU,qCAEVC,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,KAAM,SAAS,cAAc,eAAe,EAC5C,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEAA,EAAK,KAAK,iBAAiB,SAAUC,CAAY,EACjDD,EAAK,OAAO,MAAM,QAAU,OAE5B,MAAME,EAAiB,IAAIC,EAAe,aAAc,CACtD,SAAU,GACV,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAASF,EAAaG,EAAK,CACzBA,EAAI,eAAc,EAElB,MAAMC,EAAOD,EAAI,cACXE,EAAaD,EAAK,SAAS,OAAO,MAKxC,GAHAL,EAAK,OAAO,MAAM,QAAU,QAC5BA,EAAK,KAAK,UAAY,GAElB,CAACM,EAAY,CACfC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,sCACf,CAAK,EACDP,EAAK,OAAO,MAAM,QAAU,OAC5B,MACD,CACDQ,EAAkBF,CAAU,EACzB,KAAKG,GAAQ,CACZ,MAAMC,EAAMD,EAAK,KACjB,GAAI,CAACC,EAAI,OAAQ,CACfH,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACZ,CAAS,EACD,MACD,CAEDP,EAAK,KAAK,UAAYW,EAAaD,CAAG,EACtCR,EAAe,QAAO,CAC5B,CAAK,EACA,MAAMU,GAAO,CACZL,EAAS,MAAM,CACb,MAAO,QACP,QAAS,GAAGK,GACpB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbP,EAAK,MAAK,EACVL,EAAK,OAAO,MAAM,QAAU,MAClC,CAAK,CACL,CAEA,SAASQ,EAAkBF,EAAY,CACrC,MAAMO,EAAY,IAAI,gBAAgB,CACpC,IAAKd,EACL,EAAGO,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAED,OAAO,MAAM,GAAGR,KAAYe,GAAW,EAAE,KAAKC,GAAQ,CACpD,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEjC,OAAOA,EAAK,MAChB,CAAG,CACH,CAEA,SAASH,EAAaD,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CACC,aAAAK,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA,0CAC8BL;AAAA;AAAA;AAAA,qBAGrBD;AAAA,qBACAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAOcC;AAAA;AAAA;AAAA;AAAA,mCAIAC;AAAA;AAAA;AAAA;AAAA,mCAIAC;AAAA;AAAA;AAAA;AAAA,mCAIAC;AAAA;AAAA;AAAA,cAI9B,EACA,KAAK,EAAE,CACZ"}